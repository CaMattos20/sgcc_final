SET @@global.time_zone = '+3:00';

CREATE TABLE TB_PERSONS (
	ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(255),
    EMAIL VARCHAR(255),
    PHONE_NUMBER VARCHAR(255),
    PERSON_TYPE VARCHAR(255),
    DOCUMENT VARCHAR(255),
    STATUS VARCHAR(255),
    VALID_FROM DATETIME,
    VALID_TO DATETIME
);

INSERT INTO TB_PERSONS VALUES (NULL, 'Lucas', 'lucas@hotmail.com', '98814-7845', 'physycal', '1234', 'A', SYSDATE(), null);
INSERT INTO TB_PERSONS VALUES (NULL, 'Carina', 'carina@gmail.com', '96635-1457', 'physycal', '4321', 'A', SYSDATE(), null);

CREATE TABLE TB_COMPANIES (
	ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(255),
    EMAIL VARCHAR(255),
    PHONE_NUMBER VARCHAR(255),
    CNPJ VARCHAR(255),
    VALID_FROM DATETIME
);

CREATE TABLE TB_EMPLOYEES (
	ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    PERSON_ID INTEGER,
    COMPANY_ID INTEGER,
    STATUS VARCHAR(255),
    VALID_FROM DATETIME,
    VALID_TO DATETIME,
    CONSTRAINT FK_EMPLOYEE_PERSON FOREIGN KEY (PERSON_ID) REFERENCES TB_PERSONS(PERSON_ID),
    CONSTRAINT FK_EMPLOYEE_COMPANY FOREIGN KEY (COMPANY_ID) REFERENCES TB_COMPANIES(COMPANY_ID)
);

INSERT INTO TB_EMPLOYEES VALUES (NULL, 1, 1, 'A', SYSDATE(), NULL);

ALTER TABLE TB_COMPANIES ADD STATUS VARCHAR(255);
ALTER TABLE TB_PERSONS ADD STATUS VARCHAR(255);

CREATE TABLE TB_BUILDINGS (
	ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(255),
    STATUS VARCHAR(255),
    VALID_FROM DATETIME
);

ALTER TABLE TB_BUILDINGS ADD NUMBER_OF_ROOMS INTEGER;
ALTER TABLE TB_BUILDINGS MODIFY ROOM_VALUE DECIMAL(19,2);

UPDATE TB_BUILDINGS SET NUMBER_OF_ROOMS = 50, ROOM_VALUE = 1500 WHERE ROOM_VALUE IS NULL;

CREATE TABLE TB_ROOM_OWNERS (
	ID INTEGER PRIMARY KEY AUTO_INCREMENT,
	COMPANY_ID INTEGER,    
    BUILDING_ID INTEGER,
    ROOM_NUMBER INTEGER,
    STATUS VARCHAR(255),
    VALID_FROM DATETIME,
    VALID_TO DATETIME
);

CREATE TABLE TB_RENTERS (
	ID INTEGER PRIMARY KEY AUTO_INCREMENT,
	COMPANY_ID INTEGER,
    BUILDING_ID INTEGER,
    ROOM_NUMBER INTEGER,
    STATUS VARCHAR(255),
    VALID_FROM DATETIME,
    VALID_TO DATETIME
);

CREATE TABLE TB_VISITS (
	ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    PERSON_ID INTEGER,
	COMPANY_ID INTEGER,
    BUILDING_ID INTEGER,
    ROOM_NUMBER INTEGER,
    ENTRANCE_TIME DATETIME,
    EXIT_TIME DATETIME,
    STATUS VARCHAR(255),
    VALID_FROM DATETIME
);

CREATE TABLE TB_EXPENSES (
	ID INTEGER PRIMARY KEY AUTO_INCREMENT,
    MONTH INTEGER,
    YEAR INTEGER,
    MATERIALS DECIMAL(19,2),
    WATER DECIMAL(19,2),
    ELECTRICITY DECIMAL(19,2),
    ELEVATORS DECIMAL(19,2),
    ENVIRONMENT DECIMAL(19,2),
    CLEANING DECIMAL(19,2),
    FIRE DECIMAL(19,2),
    GARBAGE DECIMAL(19,2),
    PARKING DECIMAL(19,2),
    MAIL DECIMAL(19,2),    
    STATUS VARCHAR(255),
    VALID_FROM DATETIME
);